# GitHub Copilot 全局指令文件
# 适用于 AI-SDLC 项目的代码生成指导原则

## 开发环境要求

### Python 虚拟环境
- 总是假设项目运行在 `.venv` 虚拟环境中
- 生成的脚本必须包含虚拟环境激活步骤
- 在 Windows 环境下使用 `.venv\Scripts\activate`
- 在 Unix/Linux 环境下使用 `source .venv/bin/activate`
- 避免直接使用全局 Python 环境

### 依赖管理
- 优先使用 `requirements.txt` 管理依赖
- 生成新的依赖时，提供相应的 pip install 命令
- 版本固定策略：核心依赖指定版本，辅助依赖使用 `>=` 语法
- 特别注意 SpaCy 模型的下载和安装

## 代码风格和规范

### Python 代码规范
- 遵循 PEP 8 代码风格
- 使用类型提示 (Type Hints)
- 函数和类必须有详细的文档字符串
- 错误处理使用 try-except 块，避免裸露的 except
- 日志记录使用 Python 标准库 logging 模块

### 项目结构
- 主要模块：`mainui.py` (主界面), `mainmenu_gui.py` (菜单界面)
- 测试文件：以 `test_` 开头命名
- 配置文件：使用 `.ini` 或 `.yaml` 格式
- 文档：使用 Markdown 格式

## 技术栈特定指导

### GUI 开发
- 优先使用已有的 GUI 框架模式
- 界面布局要考虑响应式设计
- 错误提示要用户友好
- 支持键盘快捷键操作

### API 开发
- 使用 RESTful API 设计原则
- API 文档自动生成 (Swagger/OpenAPI)
- 输入验证和错误处理
- 支持分页和过滤功能

### 数据处理
- 使用 pandas 进行数据分析
- 大数据集分批处理，避免内存溢出
- 数据库操作使用连接池
- 敏感数据加密存储

### NLP 相关
- 使用 SpaCy 进行中文自然语言处理
- 模型文件路径要可配置
- 文本预处理标准化
- 支持批量文本处理

## 错误处理和日志

### 错误处理策略
- 使用自定义异常类
- 提供清晰的错误消息
- 关键操作要有回滚机制
- 网络请求要有重试机制

### 日志记录
- 使用结构化日志 (JSON 格式)
- 日志级别：DEBUG, INFO, WARNING, ERROR, CRITICAL
- 敏感信息不记录到日志
- 支持日志轮转和归档

## 测试策略

### 单元测试
- 使用 pytest 框架
- 测试覆盖率目标 80% 以上
- Mock 外部依赖
- 参数化测试减少重复代码

### 集成测试
- 测试完整的用户工作流
- 模拟真实的数据环境
- 性能测试和压力测试
- 跨平台兼容性测试

## 安全考虑

### 数据安全
- 输入验证防止注入攻击
- 敏感配置使用环境变量
- API 密钥不硬编码
- 用户数据加密存储

### 代码安全
- 避免使用 eval() 等危险函数
- 文件操作检查路径安全
- 网络请求验证 SSL 证书
- 定期更新依赖包版本

## 性能优化

### 代码性能
- 使用生成器处理大数据集
- 数据库查询优化
- 缓存频繁访问的数据
- 异步操作提高响应速度

### 内存管理
- 及时释放大对象
- 避免循环引用
- 使用弱引用处理回调
- 监控内存使用情况

## Agent 模式特定指导

### 终端操作
- 优先在当前终端执行命令
- 避免创建新的终端窗口
- 命令执行前检查环境状态
- 支持命令历史记录

### 工作流自动化
- 操作步骤要原子化
- 支持操作回滚
- 状态检查和验证
- 进度反馈和日志记录

## 文档和注释

### 代码注释
- 复杂逻辑必须有注释说明
- 注释使用中文，简洁明了
- TODO 和 FIXME 标记要有时间戳
- API 接口要有完整的文档字符串

### 项目文档
- README.md 包含完整的安装和使用指南
- 更新日志记录重要变更
- API 文档自动生成
- 架构图和流程图使用 PlantUML

## 兼容性和维护

### 版本兼容性
- Python 3.12+ 支持
- 向后兼容性考虑
- 依赖版本冲突解决
- 跨平台兼容 (Windows/Linux/macOS)

### 代码维护
- 重构时保持 API 稳定
- 废弃功能要有迁移指南
- 代码审查清单
- 自动化测试覆盖回归

## 特殊场景处理

### 大文件处理
- 分块读取和处理
- 进度条显示
- 内存使用监控
- 中断恢复机制

### 网络异常
- 连接超时设置
- 重试机制配置
- 离线模式支持
- 网络状态检测

### 多语言支持
- 国际化 (i18n) 框架
- 字符编码统一 UTF-8
- 日期时间本地化
- 数字格式本地化

---

## 使用说明

这个指令文件与项目的 `.aidevrc` 配置文件配合使用：

- `.aidevrc`: 定义项目运行时的环境要求和行为规范
- 本指令文件: 指导 AI 在代码生成时遵循的最佳实践

两者结合确保：
1. 代码生成符合项目规范
2. 运行时环境强制符合要求
3. 开发体验一致性
4. 代码质量和安全性

请将此文件放置在用户目录下的 `.github-copilot-instructions.md` 或项目根目录作为项目特定指令使用。
