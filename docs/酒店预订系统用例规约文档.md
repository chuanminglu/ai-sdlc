# 酒店预订系统用例规约文档

## 版本信息
- **文档版本**: 1.0
- **创建日期**: 2025年7月16日
- **最后更新**: 2025年7月16日
- **项目名称**: 酒店预订系统

---

## 目录

1. [用例概览](#1-用例概览)
2. [客户用例规约](#2-客户用例规约)
3. [管理员用例规约](#3-管理员用例规约)
4. [系统用例规约](#4-系统用例规约)
5. [用例关系说明](#5-用例关系说明)
6. [非功能性需求](#6-非功能性需求)

---

## 1. 用例概览

### 1.1 参与者说明

| 参与者 | 描述 | 职责 |
|--------|------|------|
| 客户 | 使用系统预订房间的最终用户 | 查看房间、预订房间、管理个人预订 |
| 管理员 | 酒店工作人员，负责系统管理 | 管理房间信息、处理预订、查看报表 |
| 支付系统 | 外部支付服务提供商 | 处理支付交易、验证支付信息 |

### 1.2 用例列表

| 用例ID | 用例名称 | 优先级 | 复杂度 | 状态 |
|--------|----------|--------|--------|------|
| UC001 | 用户注册 | 高 | 中 | 待开发 |
| UC002 | 用户登录 | 高 | 低 | 待开发 |
| UC003 | 查看房间 | 高 | 中 | 待开发 |
| UC004 | 预订房间 | 高 | 高 | 待开发 |
| UC005 | 查看预订历史 | 中 | 中 | 待开发 |
| UC006 | 取消预订 | 高 | 中 | 待开发 |
| UC007 | 管理房间 | 高 | 高 | 待开发 |
| UC008 | 管理预订 | 高 | 高 | 待开发 |
| UC009 | 查看报表 | 中 | 中 | 待开发 |
| UC010 | 处理支付 | 高 | 高 | 待开发 |

---

## 2. 客户用例规约

### UC001: 用户注册

**基本信息**
- **用例名称**: 用户注册
- **用例ID**: UC001
- **参与者**: 客户
- **前置条件**: 
  - 客户访问系统注册页面
  - 系统正常运行
- **后置条件**: 
  - 成功：用户账户创建成功，可以登录系统
  - 失败：注册失败，显示错误信息

**主要成功场景**:
1. 客户访问注册页面
2. 客户填写注册信息（用户名、邮箱、密码、确认密码、手机号码）
3. 客户阅读并同意服务条款
4. 客户点击"注册"按钮
5. 系统验证输入信息的有效性
6. 系统检查用户名和邮箱的唯一性
7. 系统创建新用户账户
8. 系统发送验证邮件到用户邮箱
9. 系统显示注册成功信息
10. 系统引导用户到登录页面

**扩展场景**:
- **5a. 输入信息无效**:
  - 5a1. 系统显示具体的验证错误信息
  - 5a2. 用户修正错误信息
  - 5a3. 返回步骤4
- **6a. 用户名已存在**:
  - 6a1. 系统提示"用户名已被占用"
  - 6a2. 建议相似的可用用户名
  - 6a3. 返回步骤2
- **6b. 邮箱已注册**:
  - 6b1. 系统提示"该邮箱已注册"
  - 6b2. 提供"找回密码"链接
  - 6b3. 返回步骤2

**特殊需求**:
- 密码强度要求：至少8位，包含大小写字母、数字和特殊字符
- 邮箱格式验证
- 手机号码格式验证
- 验证码有效期：24小时

**技术和数据变化**:
- 用户数据存储到数据库
- 密码加密存储
- 邮件发送日志记录

**使用频率**: 每日约50-100次

---

### UC002: 用户登录

**基本信息**
- **用例名称**: 用户登录
- **用例ID**: UC002
- **参与者**: 客户
- **前置条件**: 
  - 用户已注册账户
  - 用户访问登录页面
- **后置条件**: 
  - 成功：用户成功登录，获得访问权限
  - 失败：登录失败，显示错误信息

**主要成功场景**:
1. 客户访问登录页面
2. 客户输入用户名/邮箱和密码
3. 客户点击"登录"按钮
4. 系统验证登录凭据
5. 系统创建用户会话
6. 系统记录登录日志
7. 系统重定向到用户主页

**扩展场景**:
- **4a. 登录凭据无效**:
  - 4a1. 系统显示"用户名或密码错误"
  - 4a2. 增加失败尝试计数
  - 4a3. 返回步骤2
- **4b. 账户被锁定**:
  - 4b1. 系统显示"账户已被锁定，请联系客服"
  - 4b2. 用例结束
- **4c. 连续登录失败**:
  - 4c1. 系统要求输入验证码
  - 4c2. 如果超过5次失败，临时锁定账户30分钟

**特殊需求**:
- 会话超时：2小时无操作自动退出
- 记住我功能：30天免登录
- 安全登录：支持两步验证（可选）

**使用频率**: 每日约200-500次

---

### UC003: 查看房间

**基本信息**
- **用例名称**: 查看房间
- **用例ID**: UC003
- **参与者**: 客户
- **前置条件**: 
  - 客户访问系统
  - 系统中有可用房间信息
- **后置条件**: 
  - 客户看到房间列表和详细信息

**主要成功场景**:
1. 客户访问房间浏览页面
2. 客户可选择设置搜索条件（入住日期、退房日期、客人数量、房间类型）
3. 系统显示符合条件的房间列表
4. 客户浏览房间列表，查看房间基本信息
5. 客户点击感兴趣的房间查看详情
6. 系统显示房间详细信息（图片、设施、价格、可用性）
7. 客户可以查看房间评价和评分
8. 客户可以比较不同房间

**扩展场景**:
- **3a. 无符合条件的房间**:
  - 3a1. 系统显示"暂无符合条件的房间"
  - 3a2. 建议调整搜索条件或选择其他日期
- **3b. 筛选和排序**:
  - 3b1. 客户可按价格、评分、房间类型筛选
  - 3b2. 客户可按价格从低到高/从高到低排序

**特殊需求**:
- 响应时间：页面加载时间不超过3秒
- 图片懒加载优化
- 移动端适配
- 价格实时更新

**使用频率**: 每日约1000-2000次

---

### UC004: 预订房间

**基本信息**
- **用例名称**: 预订房间
- **用例ID**: UC004
- **参与者**: 客户、支付系统
- **前置条件**: 
  - 客户已登录系统
  - 客户已选择要预订的房间
  - 房间在指定日期可用
- **后置条件**: 
  - 成功：预订创建成功，支付完成，发送确认信息
  - 失败：预订失败，释放临时锁定的房间

**主要成功场景**:
1. 客户在房间详情页点击"预订"按钮
2. 系统检查房间可用性
3. 系统临时锁定房间（15分钟）
4. 系统显示预订信息确认页面
5. 客户填写预订详细信息（入住/退房日期、客人信息、特殊要求）
6. 系统计算并显示总价格（包含税费）
7. 客户确认预订信息
8. 系统跳转到支付页面
9. 客户选择支付方式并输入支付信息
10. 系统调用支付接口处理支付
11. 支付系统返回支付成功结果
12. 系统创建正式预订记录
13. 系统发送预订确认邮件和短信
14. 系统显示预订成功页面和预订号

**扩展场景**:
- **2a. 房间不可用**:
  - 2a1. 系统显示"房间已被预订"
  - 2a2. 建议相似的可用房间
  - 2a3. 用例结束
- **10a. 支付失败**:
  - 10a1. 系统显示支付失败原因
  - 10a2. 允许客户重新支付或更换支付方式
  - 10a3. 返回步骤9
- **10b. 支付超时**:
  - 10b1. 系统释放房间锁定
  - 10b2. 提示客户重新开始预订流程
- **11a. 网络异常**:
  - 11a1. 系统重试支付状态查询
  - 11a2. 如果仍失败，记录异常并通知客服处理

**包含关系**:
- 包含：用户登录（UC002）
- 包含：处理支付（UC010）

**特殊需求**:
- 房间锁定时间：15分钟
- 支付安全：使用HTTPS加密
- 事务完整性：确保预订和支付的一致性
- 确认通知：邮件和短信双重确认

**业务规则**:
- 同一用户不能在同一时间段预订多个房间
- 预订必须至少提前1小时
- 最长住宿时间：30天
- 取消政策：入住前24小时可免费取消

**使用频率**: 每日约100-300次

---

### UC005: 查看预订历史

**基本信息**
- **用例名称**: 查看预订历史
- **用例ID**: UC005
- **参与者**: 客户
- **前置条件**: 
  - 客户已登录系统
  - 客户有历史预订记录
- **后置条件**: 
  - 客户看到自己的预订历史列表

**主要成功场景**:
1. 客户登录后访问"我的预订"页面
2. 系统查询客户的预订历史
3. 系统显示预订列表（按时间倒序）
4. 对每个预订显示：预订号、酒店名称、房间类型、入住/退房日期、状态、总价
5. 客户可以点击查看预订详情
6. 系统显示预订的完整信息和操作选项

**扩展场景**:
- **2a. 无预订历史**:
  - 2a1. 系统显示"您还没有任何预订记录"
  - 2a2. 提供"立即预订"按钮
- **5a. 筛选预订**:
  - 5a1. 客户可按状态筛选（全部、即将到来、已完成、已取消）
  - 5a2. 客户可按日期范围筛选
- **6a. 可取消的预订**:
  - 6a1. 显示"取消预订"按钮
  - 6a2. 客户可以直接取消符合条件的预订

**包含关系**:
- 包含：用户登录（UC002）

**特殊需求**:
- 分页显示：每页10条记录
- 状态实时更新
- 快速操作：一键取消、重新预订

**使用频率**: 每日约200-400次

---

### UC006: 取消预订

**基本信息**
- **用例名称**: 取消预订
- **用例ID**: UC006
- **参与者**: 客户
- **前置条件**: 
  - 客户已登录系统
  - 存在可取消的预订
  - 符合取消政策条件
- **后置条件**: 
  - 成功：预订状态更新为已取消，处理退款
  - 失败：取消失败，预订状态不变

**主要成功场景**:
1. 客户在预订详情页点击"取消预订"按钮
2. 系统检查预订是否可以取消
3. 系统显示取消政策和退款信息
4. 客户确认取消操作
5. 客户填写取消原因（可选）
6. 系统更新预订状态为"已取消"
7. 系统释放被预订的房间
8. 系统根据取消政策计算退款金额
9. 系统处理退款到原支付方式
10. 系统发送取消确认邮件和短信
11. 系统显示取消成功页面

**扩展场景**:
- **2a. 预订不可取消**:
  - 2a1. 系统显示"该预订不符合取消条件"
  - 2a2. 说明具体原因（如已过取消期限）
  - 2a3. 提供客服联系方式
- **9a. 退款处理失败**:
  - 9a1. 系统记录退款失败信息
  - 9a2. 通知财务人员手动处理
  - 9a3. 向客户发送说明邮件

**包含关系**:
- 包含：用户登录（UC002）

**特殊需求**:
- 取消时限：入住前24小时
- 退款时间：3-7个工作日
- 审计跟踪：记录所有取消操作

**业务规则**:
- 免费取消期：入住前24小时
- 部分退款期：入住前24小时内，收取一晚房费
- 不可退款：入住当天取消

**使用频率**: 每日约20-50次

---

## 3. 管理员用例规约

### UC007: 管理房间

**基本信息**
- **用例名称**: 管理房间
- **用例ID**: UC007
- **参与者**: 管理员
- **前置条件**: 
  - 管理员已登录系统
  - 管理员具有房间管理权限
- **后置条件**: 
  - 房间信息得到有效管理和更新

**主要成功场景**:
1. 管理员访问房间管理页面
2. 系统显示房间列表和管理工具
3. 管理员选择要执行的操作：
   - 3a. 添加新房间
   - 3b. 编辑房间信息
   - 3c. 设置房间状态
   - 3d. 管理房间价格
   - 3e. 上传房间图片

**添加新房间子流程（3a）**:
1. 管理员点击"添加房间"按钮
2. 系统显示房间信息输入表单
3. 管理员填写房间详细信息
4. 管理员上传房间图片
5. 系统验证输入信息
6. 系统保存新房间信息
7. 系统显示添加成功信息

**编辑房间信息子流程（3b）**:
1. 管理员选择要编辑的房间
2. 系统显示房间当前信息
3. 管理员修改需要更新的信息
4. 系统验证修改的信息
5. 系统保存更新的信息
6. 系统显示更新成功信息

**扩展场景**:
- **5a. 信息验证失败**:
  - 5a1. 系统显示具体的错误信息
  - 5a2. 管理员修正错误
  - 5a3. 返回相应步骤
- **房间号重复**:
  - 系统提示房间号已存在
  - 建议新的房间号

**特殊需求**:
- 图片格式：支持JPG、PNG，单张不超过5MB
- 房间号唯一性验证
- 价格合理性检查
- 操作日志记录

**使用频率**: 每日约10-30次

---

### UC008: 管理预订

**基本信息**
- **用例名称**: 管理预订
- **用例ID**: UC008
- **参与者**: 管理员
- **前置条件**: 
  - 管理员已登录系统
  - 管理员具有预订管理权限
- **后置条件**: 
  - 预订信息得到有效管理

**主要成功场景**:
1. 管理员访问预订管理页面
2. 系统显示预订列表和筛选工具
3. 管理员可以：
   - 3a. 查看预订详情
   - 3b. 修改预订信息
   - 3c. 处理特殊要求
   - 3d. 办理入住/退房
   - 3e. 处理预订纠纷

**查看预订详情子流程（3a）**:
1. 管理员选择要查看的预订
2. 系统显示预订的完整信息
3. 管理员可以查看客户信息、支付记录、操作历史

**办理入住子流程（3d）**:
1. 管理员搜索预订（通过预订号或客户信息）
2. 系统显示预订详情
3. 管理员验证客户身份
4. 管理员确认房间准备就绪
5. 管理员点击"办理入住"
6. 系统更新预订状态为"已入住"
7. 系统生成房卡信息
8. 管理员打印入住凭证

**扩展场景**:
- **客户提前到达**:
  - 检查房间是否提前可用
  - 如可用，允许提前入住
  - 如不可用，安排临时休息区
- **客户未到达**:
  - 查看是否已联系客户
  - 按照政策处理no-show情况

**特殊需求**:
- 实时状态更新
- 批量操作支持
- 详细的操作日志
- 客户信息保护

**使用频率**: 每日约50-150次

---

### UC009: 查看报表

**基本信息**
- **用例名称**: 查看报表
- **用例ID**: UC009
- **参与者**: 管理员
- **前置条件**: 
  - 管理员已登录系统
  - 管理员具有报表查看权限
- **后置条件**: 
  - 管理员获得所需的业务数据和分析报告

**主要成功场景**:
1. 管理员访问报表页面
2. 系统显示可用的报表类型
3. 管理员选择要查看的报表类型：
   - 3a. 预订统计报表
   - 3b. 收入分析报表
   - 3c. 房间利用率报表
   - 3d. 客户分析报表
4. 管理员设置报表参数（日期范围、筛选条件等）
5. 系统生成并显示报表
6. 管理员可以导出报表（PDF、Excel格式）

**预订统计报表子流程（3a）**:
- 显示指定时间段内的预订数量、取消率、no-show率
- 按房间类型、来源渠道分类统计
- 提供趋势分析图表

**收入分析报表子流程（3b）**:
- 显示总收入、平均房价、RevPAR等关键指标
- 按时间、房间类型、客户类型分析收入
- 提供收入预测和对比分析

**扩展场景**:
- **5a. 报表生成失败**:
  - 5a1. 系统显示错误信息
  - 5a2. 建议管理员检查参数或稍后重试
- **大数据量报表**:
  - 系统提示预计生成时间
  - 支持后台生成，完成后邮件通知

**特殊需求**:
- 实时数据更新
- 多种图表展示方式
- 数据导出功能
- 定时报表邮件发送

**使用频率**: 每日约5-20次

---

## 4. 系统用例规约

### UC010: 处理支付

**基本信息**
- **用例名称**: 处理支付
- **用例ID**: UC010
- **参与者**: 支付系统（主要）、客户、系统
- **前置条件**: 
  - 客户已确认预订信息
  - 支付系统正常运行
- **后置条件**: 
  - 成功：支付完成，预订确认
  - 失败：支付失败，预订取消

**主要成功场景**:
1. 系统接收到支付请求
2. 系统验证支付信息的完整性
3. 系统调用支付网关API
4. 支付系统验证支付信息
5. 支付系统处理支付交易
6. 支付系统返回支付成功结果
7. 系统记录支付成功信息
8. 系统更新预订状态
9. 系统生成支付凭证
10. 系统发送支付成功通知

**扩展场景**:
- **4a. 支付信息无效**:
  - 4a1. 支付系统返回验证失败
  - 4a2. 系统显示具体错误信息
  - 4a3. 允许客户重新输入
- **5a. 支付被拒绝**:
  - 5a1. 支付系统返回拒绝原因
  - 5a2. 系统显示拒绝原因（如余额不足、卡被冻结等）
  - 5a3. 建议客户联系银行或使用其他支付方式
- **网络超时**:
  - 系统重试支付状态查询
  - 如果仍无响应，标记为待确认状态
  - 通过后台任务定期检查支付状态

**特殊需求**:
- 支付安全：PCI DSS合规
- 超时处理：30秒超时
- 重试机制：最多3次重试
- 异常处理：完整的错误日志

**技术约束**:
- 支持多种支付方式：信用卡、借记卡、第三方支付
- 加密传输：SSL/TLS
- 事务处理：保证ACID特性

**使用频率**: 与预订房间用例频率相同

---

## 5. 用例关系说明

### 5.1 包含关系（Include）

1. **预订房间 includes 用户登录**
   - 描述：预订房间必须先完成用户登录
   - 原因：需要验证用户身份，关联预订记录

2. **查看预订历史 includes 用户登录**
   - 描述：查看预订历史必须先完成用户登录
   - 原因：预订历史是用户私人信息，需要身份验证

3. **取消预订 includes 用户登录**
   - 描述：取消预订必须先完成用户登录
   - 原因：只有预订的创建者才能取消预订

4. **预订房间 includes 处理支付**
   - 描述：预订房间过程中必须处理支付
   - 原因：预订确认需要支付成功

### 5.2 扩展关系（Extend）

1. **用户注册 extends 邮箱验证**
   - 描述：注册后可能需要邮箱验证
   - 条件：系统配置要求邮箱验证

2. **用户登录 extends 两步验证**
   - 描述：登录时可能需要两步验证
   - 条件：用户开启了两步验证功能

### 5.3 泛化关系（Generalization）

1. **管理预订 generalizes 办理入住**
   - 描述：办理入住是管理预订的特殊情况

2. **管理预订 generalizes 办理退房**
   - 描述：办理退房是管理预订的特殊情况

---

## 6. 非功能性需求

### 6.1 性能需求

- **响应时间**：
  - 页面加载：< 3秒
  - 搜索房间：< 2秒
  - 预订处理：< 10秒
  - 支付处理：< 30秒

- **并发用户**：
  - 支持1000个并发用户
  - 峰值时段支持2000个并发用户

- **系统可用性**：
  - 系统可用性：99.9%
  - 计划维护时间：每月不超过4小时

### 6.2 安全需求

- **数据加密**：
  - 传输加密：HTTPS/TLS 1.2+
  - 存储加密：敏感数据AES-256加密
  - 密码存储：bcrypt哈希

- **访问控制**：
  - 基于角色的访问控制（RBAC）
  - 会话管理：JWT token
  - 登录保护：防暴力破解

- **数据保护**：
  - 个人信息保护符合GDPR标准
  - 支付信息处理符合PCI DSS标准
  - 定期安全审计

### 6.3 可用性需求

- **用户界面**：
  - 直观易用的界面设计
  - 响应式设计，支持移动设备
  - 多语言支持（中文、英文）

- **错误处理**：
  - 友好的错误信息提示
  - 操作确认和撤销功能
  - 在线帮助和客服支持

### 6.4 可维护性需求

- **代码质量**：
  - 代码覆盖率 > 80%
  - 遵循编码规范
  - 详细的API文档

- **监控和日志**：
  - 完整的操作日志
  - 性能监控和告警
  - 错误跟踪和分析

### 6.5 可扩展性需求

- **架构设计**：
  - 微服务架构
  - 水平扩展支持
  - 负载均衡

- **数据库**：
  - 读写分离
  - 数据分片支持
  - 缓存机制

---

## 附录

### A. 用例优先级说明

- **高优先级**：核心业务功能，系统基本运行必需
- **中优先级**：重要功能，影响用户体验
- **低优先级**：辅助功能，可在后续版本实现

### B. 变更记录

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2025-07-16 | 初始版本创建 | 系统分析师 |

### C. 审核记录

| 角色 | 姓名 | 审核日期 | 审核结果 |
|------|------|----------|----------|
| 业务分析师 | - | 2025-07-16 | 待审核 |
| 技术架构师 | - | 2025-07-16 | 待审核 |
| 项目经理 | - | 2025-07-16 | 待审核 |

---

**文档结束**
