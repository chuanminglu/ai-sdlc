@startuml 预订状态转换图
[*] --> 创建中 : 开始预订

创建中 --> 待支付 : 信息验证通过
创建中 --> 已取消 : 验证失败

待支付 --> 支付中 : 提交支付
待支付 --> 已过期 : 超时未支付
待支付 --> 已取消 : 用户取消

支付中 --> 已确认 : 支付成功
支付中 --> 支付失败 : 支付失败

支付失败 --> 待支付 : 重新支付
支付失败 --> 已取消 : 放弃支付

已确认 --> 已入住 : 到达入住日期
已确认 --> 已取消 : 取消预订(可退款)

已入住 --> 已完成 : 正常退房
已入住 --> 提前退房 : 提前离店

已完成 --> [*]
已取消 --> [*]
已过期 --> [*]

note right of 已确认 : 可以在入住前24小时取消
note right of 支付失败 : 自动释放房间锁定
note right of 已过期 : 15分钟未支付自动过期

@enduml
